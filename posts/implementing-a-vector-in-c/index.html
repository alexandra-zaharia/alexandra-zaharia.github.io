<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Implementing a vector in C" /><meta name="author" content="Alexandra Zaharia" /><meta property="og:locale" content="en" /><meta name="description" content="Suppose we need a generic vector data structure in C, where by generic we mean it can handle any type of data. A vector uses an underlying array, therefore it supports index-based access to its elements. Moreover, the underlying array is resizable, meaning that memory space is not wasted uselessly. If the vector is full, adding a new element causes the underlying array to double its size. If the vector is 75% empty, the underlying array halves its size." /><meta property="og:description" content="Suppose we need a generic vector data structure in C, where by generic we mean it can handle any type of data. A vector uses an underlying array, therefore it supports index-based access to its elements. Moreover, the underlying array is resizable, meaning that memory space is not wasted uselessly. If the vector is full, adding a new element causes the underlying array to double its size. If the vector is 75% empty, the underlying array halves its size." /><link rel="canonical" href="https://alexandra-zaharia.github.io/posts/implementing-a-vector-in-c/" /><meta property="og:url" content="https://alexandra-zaharia.github.io/posts/implementing-a-vector-in-c/" /><meta property="og:site_name" content="Alexandra Zaharia" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-12-21T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Implementing a vector in C" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Alexandra Zaharia" /><meta name="google-site-verification" content="mlwABpnF22MCyeNCQoei9VdIPvqy_uV7b4v_vArTxXM" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Alexandra Zaharia"},"dateModified":"2021-11-27T19:22:50+01:00","datePublished":"2017-12-21T00:00:00+01:00","description":"Suppose we need a generic vector data structure in C, where by generic we mean it can handle any type of data. A vector uses an underlying array, therefore it supports index-based access to its elements. Moreover, the underlying array is resizable, meaning that memory space is not wasted uselessly. If the vector is full, adding a new element causes the underlying array to double its size. If the vector is 75% empty, the underlying array halves its size.","headline":"Implementing a vector in C","mainEntityOfPage":{"@type":"WebPage","@id":"https://alexandra-zaharia.github.io/posts/implementing-a-vector-in-c/"},"url":"https://alexandra-zaharia.github.io/posts/implementing-a-vector-in-c/"}</script><title>Implementing a vector in C | Alexandra Zaharia</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Alexandra Zaharia"><meta name="application-name" content="Alexandra Zaharia"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en">
<div class="profile-wrapper text-center">
<div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/site/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a>
</div>
<div class="site-title mt-3"> <a href="/">Alexandra Zaharia</a>
</div>
<div class="site-subtitle font-italic">My dev blog</div>
</div>
<ul class="w-100">
<li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a>
</li>
<li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a>
</li>
<li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a>
</li>
<li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a>
</li>
<li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a>
</li>
<li class="nav-item"> <a href="/resume/" class="nav-link"> <i class="fa-fw fas fa-user ml-xl-3 mr-xl-3 unloaded"></i> <span>RESUME</span> </a>
</li>
</ul>
<div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/alexandra-zaharia" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/alexandra-zaharia-fr" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href%20=%20'mailto:'%20+%20['contact','alexandra-zaharia.org'].join('@')" aria-label="email"> <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss"> <i class="fas fa-rss"></i> </a>
</div>
</div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Implementing a vector in C</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div>
<i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel">Cancel</span>
</div></div><div id="main-wrapper">
<div id="main">
<div class="row">
<div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">
<h1 data-toc-skip>Implementing a vector in C</h1>
<div class="post-meta text-muted d-flex flex-column">
<div> <span class="semi-bold"> Alexandra Zaharia </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Dec 21, 2017, 12:00 AM +0100">Dec 21, 2017<i class="unloaded">2017-12-21T00:00:00+01:00</i> </span>
</div>
<div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Nov 27, 2021, 7:22 PM +0100">Nov 27, 2021<i class="unloaded">2021-11-27T19:22:50+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2926 words">16 min read</span>
</div>
</div>
<div class="post-content">
<p>Suppose we need a generic vector data structure in C, where by <em>generic</em> we mean it can handle any type of data. A vector uses an underlying array, therefore it supports index-based access to its elements. Moreover, the underlying array is resizable, meaning that memory space is not wasted uselessly. If the vector is full, adding a new element causes the underlying array to double its size. If the vector is 75% empty, the underlying array halves its size.</p>
<h2 id="how-does-a-vector-work">How does a vector work?</h2>
<p>The ASCII figure below shows the example of a vector <em>v</em>, initially empty and with an initial capacity of 4 items:</p>
<div class="language-plaintext highlighter-rouge">
<div class="code-header"> <span text-data=" Plaintext "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td>
<td class="rouge-code"><pre>                          -----------------
when v is created :       |   |   |   |   |
                          -----------------

                          -----------------
append 7 to v :           | 7 |   |   |   |
                          -----------------

                          -----------------
append 1 to v :           | 7 | 1 |   |   |
                          -----------------

                          -----------------
append 5 to v :           | 7 | 1 | 5 |   |
                          -----------------

                          -----------------
append 9 to v :           | 7 | 1 | 5 | 9 |
                          -----------------

                            0   1   2   3   4   5   6   7
                          ---------------------------------
insert 2 at index 3 :     | 7 | 1 | 5 | 2 | 9 |   |   |   |   &lt;-- capacity doubles
                          ---------------------------------

                            0   1   2   3   4   5   6   7
                          ---------------------------------
insert 2 at index 3 :     | 7 | 1 | 5 | 2 | 9 |   |   |   |
                          ---------------------------------

                            0   1   2   3   4   5   6   7
                          ---------------------------------
remove item at index 3 :  | 7 | 1 | 5 | 9 |   |   |   |   |
                          ---------------------------------

                            0   1   2   3   4   5   6   7
                          ---------------------------------
remove item at index 1 :  | 7 | 5 | 9 |   |   |   |   |   |
                          ---------------------------------

                            0   1   2   3
                          -----------------
remove item at index 0 :  | 5 | 9 |   |   |   &lt;-- capacity is reduced by half since 75% empty
                          -----------------
</pre></td>
</tr></tbody></table></code></div>
</div>
<h2 id="comparison-with-alternative-data-structures">Comparison with alternative data structures</h2>
<p>A <strong>fixed-size array</strong> allows access to its elements in \( O(1) \) time. Adding items at the end of the array also takes \( O(1) \) time. However, insertion (other than at the end of the array) and deletion require \( O(n) \) time. As its name implies, a fixed-size array cannot change its size.</p>
<p>A <strong>vector</strong> uses an underlying <em>resizing</em> array, meaning that its capacity is automatically adjusted to accommodate its elements.</p>
<p>In contrast to an array, a <strong>linked list</strong> allows insertion and deletion in \( O(1) \) time, but accessing the <em>k</em><sup>th</sup> element requires \( O(n) \) time.</p>
<p>An array (a fixed-size array or a resizing array, i.e. a vector) should be used when indexing happens more often than insertion or deletion at arbitrary positions. A linked list is more appropriate when indexing happens rarely and when insertions and deletions are frequent.</p>
<h2 id="resizing-the-vector">Resizing the vector</h2>
<p>A vector starts out with an initial capacity, for which we can make an educated guess depending on the application. Let us suppose a good choice for an initial capacity is 4.</p>
<p>When the 5<sup>th</sup> item is added to the vector, its capacity doubles, becoming 8. When the 9<sup>th</sup> item is added, the capacity doubles again, becoming 16, and so on. <strong>Doubling the vector capacity</strong> is thus performed only if it is absolutely necessary to do so.</p>
<p><strong>Halving the vector capacity</strong> is more tricky. The aim is to strike a good balance between array resizing operations performed via <code class="language-plaintext highlighter-rouge">realloc()</code> and not wasting too much memory space. Suppose a vector has 9 items and its capacity is 16. If we remove one item, it would be tempting to halve the capacity on the spot. But if a 9<sup>th</sup> item needs to be added right away, we would have to double the capacity yet again. The best bet is to halve the vector capacity when it is one quarter full, because this means we have been removing items from the vector for quite some time and it is reasonable to assume that the need to double the capacity will not arise any time soon. Continuing the example, a vector would keep its capacity of 16 items as long as it has at least 5 items. When it only has 4 items, its capacity becomes 8. Consider another example of a vector with 513 elements and capacity 1024. If we start removing items, the capacity shrinks to 512 when only 256 items remain. The capacity further shrinks to 256 when only 128 items remain, and so on.</p>
<h2 id="vector-definition">Vector definition</h2>
<p>Here is a bare-bones definition of a vector in C:</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">void</span> <span class="o">**</span><span class="n">data</span><span class="p">;</span>     <span class="cm">/* information stored in the vector */</span>
    <span class="kt">size_t</span> <span class="n">count</span><span class="p">;</span>    <span class="cm">/* number of elements currently stored in the vector */</span>
    <span class="kt">size_t</span> <span class="n">capacity</span><span class="p">;</span> <span class="cm">/* maximum capacity of the vector */</span>
<span class="p">}</span> <span class="n">Vector</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<p>We want this data structure to be generic, meaning it must be able to handle any type of item: integers, doubles, strings, as well as user-defined data structures. This is why items in a <code class="language-plaintext highlighter-rouge">Vector</code> are of type <code class="language-plaintext highlighter-rouge">void *</code>. As vector items are organized in an array, what we need for the vector <code class="language-plaintext highlighter-rouge">data</code> is a pointer to pointer to void (<code class="language-plaintext highlighter-rouge">void **</code>).</p>
<p>We should also define the initial capacity of the vector. Note however that this choice is highly dependent on the application. Here, we will use an initial capacity of 4:</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="k">const</span> <span class="kt">size_t</span> <span class="n">VECTOR_INIT_CAPACITY</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<p>The <code class="language-plaintext highlighter-rouge">Vector</code> implementation in <a href="https://github.com/alexandra-zaharia/libgcds">libgcds</a> (<strong>Lib</strong>rary for <strong>G</strong>eneric <strong>C D</strong>ata <strong>S</strong>tructures) defines the data structure as above, with the addition of several function pointers (<code class="language-plaintext highlighter-rouge">struct</code>s with function pointers are the <a href="https://www.amazon.com/Design-Evolution-C-Bjarne-Stroustrup/dp/0201543303">ancestors of classes</a>; for the C ecosystem, it will just have to do). In this post the aim is to keep things simple and easy to understand, not to build a library, so we will just be defining stand-alone (“normal”) functions for the <code class="language-plaintext highlighter-rouge">Vector</code> API.</p>
<h2 id="a-basic-vector-api">A basic vector API</h2>
<p>Any basic <code class="language-plaintext highlighter-rouge">Vector</code> API should have the following methods:</p>
<ul>
<li>A method to create a vector: <code class="language-plaintext highlighter-rouge">Vector *vector_create()</code> creates a <code class="language-plaintext highlighter-rouge">Vector</code> and returns a pointer to it, or the <code class="language-plaintext highlighter-rouge">NULL</code> pointer in case of failure.</li>
<li>A method to free a vector: <code class="language-plaintext highlighter-rouge">void vector_free(Vector *vector)</code> frees the specified <code class="language-plaintext highlighter-rouge">vector</code>.</li>
<li>A method to add an item at the end of a vector: <code class="language-plaintext highlighter-rouge">int vector_add(Vector *vector, void *item)</code> attempts to add the given <code class="language-plaintext highlighter-rouge">item</code> at the end of the <code class="language-plaintext highlighter-rouge">vector</code>, doubling the size of the underlying array if necessary. Returns 0 for success and -1 for failure.</li>
<li>A method to insert an item at an arbitrary position: <code class="language-plaintext highlighter-rouge">int vector_insert(Vector *vector, void *item, int index)</code> attempts to insert the given <code class="language-plaintext highlighter-rouge">item</code> at a specified <code class="language-plaintext highlighter-rouge">index</code> in the <code class="language-plaintext highlighter-rouge">vector</code>, doubling the size of the underlying array if necessary. Returns 0 for success and -1 for failure.</li>
<li>A method to delete an item at an arbitrary position: <code class="language-plaintext highlighter-rouge">int vector_delete(Vector *vector, int index)</code> attempts to delete the <code class="language-plaintext highlighter-rouge">item</code> at the specified <code class="language-plaintext highlighter-rouge">index</code> in the <code class="language-plaintext highlighter-rouge">vector</code>, halving the size of the underlying array if necessary. Returns 0 for success and -1 for failure.</li>
</ul>
<p>In the remainder of this section we will implement each of these methods in turn.</p>
<h3 id="vector_create">vector_create()</h3>
<p>We start by allocating memory for a vector and return <code class="language-plaintext highlighter-rouge">NULL</code> if the allocation fails. Then we initialize the number of elements to 0 and the capacity to the initial capacity. We must also allocate memory for the underlying array <code class="language-plaintext highlighter-rouge">vector-&gt;data</code>. If this is not possible, we free the vector pointer and return <code class="language-plaintext highlighter-rouge">NULL</code>. If everything went fine, the function returns a pointer to the brand new vector.</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td>
<td class="rouge-code"><pre><span class="n">Vector</span> <span class="o">*</span><span class="nf">vector_create</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vector</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">Vector</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">vector</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>

    <span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">-&gt;</span><span class="n">capacity</span> <span class="o">=</span> <span class="n">VECTOR_INIT_CAPACITY</span><span class="p">;</span>

    <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">capacity</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">vector_free</span><span class="p">(</span><span class="n">vector</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">vector</span><span class="p">;</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<h3 id="vector_free">vector_free()</h3>
<p>If the pointer to <code class="language-plaintext highlighter-rouge">Vector</code> is not <code class="language-plaintext highlighter-rouge">NULL</code>, we attempt to deallocate its data, then the vector itself.</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td>
<td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">vector_free</span><span class="p">(</span><span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">vector</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span>
            <span class="n">free</span><span class="p">(</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
        <span class="n">free</span><span class="p">(</span><span class="n">vector</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<h3 id="_vector_resize">_vector_resize()</h3>
<p>Yes, <code class="language-plaintext highlighter-rouge">_vector_resize()</code> is not listed above. The reason for this is that this method is not part of the public API, but it is required for methods that may need to resize the underlying array: <code class="language-plaintext highlighter-rouge">vector_add()</code>, <code class="language-plaintext highlighter-rouge">vector_insert()</code> and <code class="language-plaintext highlighter-rouge">vector_delete()</code>. The client of the <code class="language-plaintext highlighter-rouge">Vector</code> API does not even need to know that this function exists. In order to keep it <em>private</em> to the implementation file of the vector (the <code class="language-plaintext highlighter-rouge">.c</code> file), we will be declaring it <code class="language-plaintext highlighter-rouge">static</code>.</p>
<p>The function starts out by attempting to reallocate the vector’s underlying array <code class="language-plaintext highlighter-rouge">data</code> with the new <code class="language-plaintext highlighter-rouge">capacity</code>.</p>
<blockquote><p><strong>Note</strong>: We use a new <code class="language-plaintext highlighter-rouge">void **</code> pointer for this reallocation. This is important, because <code class="language-plaintext highlighter-rouge">realloc()</code> is not guaranteed to return a pointer to the memory location occupied by the array to be resized.</p></blockquote>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
<td class="rouge-code"><pre><span class="k">static</span> <span class="kt">int</span> <span class="nf">_vector_resize</span><span class="p">(</span><span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">capacity</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="o">**</span><span class="n">data</span> <span class="o">=</span> <span class="n">realloc</span><span class="p">(</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">,</span> <span class="n">capacity</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">));</span>
    <span class="n">vector</span><span class="o">-&gt;</span><span class="n">capacity</span> <span class="o">=</span> <span class="n">capacity</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="o">!=</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span>
        <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<h3 id="vector_add">vector_add()</h3>
<p>Adding an item at the end of a vector can fail if the vector or its data is <code class="language-plaintext highlighter-rouge">NULL</code>, or if the resizing is unsuccessful. Resizing the underlying array is performed if there is no free slot in the vector to add the new item.</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
<td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">vector_add</span><span class="p">(</span><span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">item</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">vector</span> <span class="o">||</span> <span class="o">!</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span> <span class="o">==</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">capacity</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_vector_resize</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">capacity</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<h3 id="vector_insert">vector_insert()</h3>
<p>Inserting an item at an arbitrary position in a vector can fail if the vector or its data is <code class="language-plaintext highlighter-rouge">NULL</code>, if the index is incorrect, or if the resizing is unsuccessful. As for <code class="language-plaintext highlighter-rouge">vector_add()</code>, resizing is performed if there is no free slot for the new item. In addition, every item in the vector after the position designated by <code class="language-plaintext highlighter-rouge">index</code> must be shifted by one position to the right. A special case is identified where insertion takes place at the end of the vector, in which case <code class="language-plaintext highlighter-rouge">vector_add()</code> is used directly. As we’ve seen above, <code class="language-plaintext highlighter-rouge">vector_add()</code> may also fail, so a check for its return code is equally performed.</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td>
<td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">vector_insert</span><span class="p">(</span><span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">item</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">vector</span> <span class="o">||</span> <span class="o">!</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">vector_add</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span> <span class="o">==</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">capacity</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">_vector_resize</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">capacity</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">index</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
            <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>

        <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<h3 id="vector_delete">vector_delete()</h3>
<p>Deleting an item at an arbitrary position in a vector can fail if the vector or its data is <code class="language-plaintext highlighter-rouge">NULL</code>, if the index is incorrect, or if the resizing is unsuccessful. Resizing the underlying array to half its capacity is performed if the vector is one quarter full after deletion. Every item in the vector after the position designated by <code class="language-plaintext highlighter-rouge">index</code> must be shifted by one position to the left.</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td>
<td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">vector_delete</span><span class="p">(</span><span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">vector</span> <span class="o">||</span> <span class="o">!</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

    <span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span><span class="o">--</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">index</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span> <span class="o">==</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">capacity</span> <span class="o">/</span> <span class="mi">4</span>
            <span class="o">&amp;&amp;</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">capacity</span> <span class="o">&gt;</span> <span class="n">VECTOR_INIT_CAPACITY</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_vector_resize</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">capacity</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<h2 id="an-improved-vector-api">An improved Vector API</h2>
<p>For all practical purposes, there is a high chance that the basic API we have just seen above is not sufficient. As the need arises, we may add several useful functions to our <code class="language-plaintext highlighter-rouge">Vector</code> API, such as:</p>
<ul>
<li>A method to check whether the vector contains a given item: <code class="language-plaintext highlighter-rouge">bool vector_contains(Vector* vector, void* item)</code> determines whether the <code class="language-plaintext highlighter-rouge">vector</code> contains the specified <code class="language-plaintext highlighter-rouge">item</code>. Returns <code class="language-plaintext highlighter-rouge">true</code> if the item exists, <code class="language-plaintext highlighter-rouge">false</code> otherwise.</li>
<li>A method to determine the index of a given item in the vector: <code class="language-plaintext highlighter-rouge">int vector_index(Vector* vector, void* item)</code> determines the index of the specified <code class="language-plaintext highlighter-rouge">item</code> in the <code class="language-plaintext highlighter-rouge">vector</code>, or -1 if no such item exists.</li>
</ul>
<blockquote><p><strong>Note</strong>: In both cases that we do not actually examine the <em>value</em> of the item, since at this point we cannot even know what kind of items we are dealing with. We simply compare void pointers, which enables us to determine whether the given item exists in the vector’s <code class="language-plaintext highlighter-rouge">data</code> array.</p></blockquote>
<h3 id="vector_contains">vector_contains()</h3>
<p>If the vector is not <code class="language-plaintext highlighter-rouge">NULL</code>, we iterate its <code class="language-plaintext highlighter-rouge">data</code> array and compare its every item against the specified one.</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td>
<td class="rouge-code"><pre><span class="n">bool</span> <span class="nf">vector_contains</span><span class="p">(</span><span class="n">Vector</span><span class="o">*</span> <span class="n">vector</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">item</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">vector</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<h3 id="vector_index">vector_index()</h3>
<p>If the vector is not <code class="language-plaintext highlighter-rouge">NULL</code>, we iterate its <code class="language-plaintext highlighter-rouge">data</code> array until we find the specified item or until we hit the end of the array.</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td>
<td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">vector_index</span><span class="p">(</span><span class="n">Vector</span><span class="o">*</span> <span class="n">vector</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">item</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">vector</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<h2 id="examples-of-vectors">Examples of vectors</h2>
<p>Here we will see how two clients may use the <code class="language-plaintext highlighter-rouge">Vector</code> API that we have just examined: one client creates a vector of integers, and the other one creates a vector of user-defined data structures.</p>
<h3 id="example-1-a-vector-of-integers">Example #1: A vector of integers</h3>
<p>Suppose we need a vector to handle integers. First, values 2, 4 and 6 are added at the end of the vector using <code class="language-plaintext highlighter-rouge">vector_add()</code>. The vector is <code class="language-plaintext highlighter-rouge">[ 2 4 6 ]</code>. Second, the values 1, 3 and 5 are inserted in between using <code class="language-plaintext highlighter-rouge">vector_insert()</code>, such that the vector becomes <code class="language-plaintext highlighter-rouge">[ 1 2 3 4 5 6 ]</code>. Finally, the last three values are deleted from the vector using <code class="language-plaintext highlighter-rouge">vector_delete()</code>. The vector is now <code class="language-plaintext highlighter-rouge">[ 1 2 3 ]</code>. The following program details these steps:</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td>
<td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">"vector.h"</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">vector_int_print</span><span class="p">(</span><span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span> <span class="o">=</span> <span class="n">vector_create</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">vector</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"Cannot allocate vector.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">even</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">};</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">vector_add</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">even</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="n">vector_int_print</span><span class="p">(</span><span class="n">vector</span><span class="p">);</span> <span class="cm">/* [ 2 4 6 ] */</span>

    <span class="kt">int</span> <span class="n">odd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span>
    <span class="n">vector_insert</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">odd</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">vector_insert</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">odd</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">vector_insert</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">odd</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">4</span><span class="p">);</span>
    <span class="n">vector_int_print</span><span class="p">(</span><span class="n">vector</span><span class="p">);</span> <span class="cm">/* [ 1 2 3 4 5 6 ] */</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="n">vector_delete</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="n">vector_int_print</span><span class="p">(</span><span class="n">vector</span><span class="p">);</span> <span class="cm">/* [ 1 2 3 ] */</span>

    <span class="n">vector_free</span><span class="p">(</span><span class="n">vector</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">vector_int_print</span><span class="p">(</span><span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"[ "</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"%d "</span><span class="p">,</span> <span class="o">*</span><span class="p">((</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"]</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<blockquote><p><strong>Note</strong>: Checks for return codes from <code class="language-plaintext highlighter-rouge">vector_add()</code>, <code class="language-plaintext highlighter-rouge">vector_insert()</code> and <code class="language-plaintext highlighter-rouge">vector_delete()</code> should be performed, but have been omitted here for the sake of brevity.</p></blockquote>
<h3 id="example-2-a-vector-of-user-defined-data-structures">Example #2: A vector of user-defined data structures</h3>
<p>Suppose we now need a vector to handle a user-defined data structure representing 2D points. We first add the points with coordinates (1, 10) and (3, 30) to the vector using <code class="language-plaintext highlighter-rouge">vector_add()</code>. We then insert the point (2, 20) in between using <code class="language-plaintext highlighter-rouge">vector_insert()</code>. The following program details these steps:</p>
<div class="language-c highlighter-rouge">
<div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td>
<td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">"vector.h"</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">vector_point_print</span><span class="p">(</span><span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span><span class="p">);</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span> <span class="n">Point</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span> <span class="o">=</span> <span class="n">vector_create</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">vector</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"Cannot allocate vector.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">Point</span> <span class="n">p1</span> <span class="o">=</span> <span class="p">{.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">10</span><span class="p">};</span>
    <span class="n">Point</span> <span class="n">p2</span> <span class="o">=</span> <span class="p">{.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">20</span><span class="p">};</span>
    <span class="n">Point</span> <span class="n">p3</span> <span class="o">=</span> <span class="p">{.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">30</span><span class="p">};</span>

    <span class="n">vector_add</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">p1</span><span class="p">);</span>
    <span class="n">vector_add</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">p3</span><span class="p">);</span>
    <span class="n">vector_insert</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">p2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">vector_point_print</span><span class="p">(</span><span class="n">vector</span><span class="p">);</span> <span class="cm">/* [ (1, 10) (2, 20) (3, 30) ] */</span>
    <span class="n">vector_free</span><span class="p">(</span><span class="n">vector</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">vector_point_print</span><span class="p">(</span><span class="n">Vector</span> <span class="o">*</span><span class="n">vector</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"[ "</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Point</span> <span class="o">*</span><span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="n">Point</span> <span class="o">*</span><span class="p">)</span> <span class="n">vector</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"(%d, %d) "</span><span class="p">,</span> <span class="n">point</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">,</span> <span class="n">point</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"]</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<blockquote><p><strong>Note</strong>: Checks for return codes from <code class="language-plaintext highlighter-rouge">vector_add()</code> and <code class="language-plaintext highlighter-rouge">vector_insert()</code> should be performed, but have been omitted here for the sake of brevity.</p></blockquote>
<h2 id="testing-the-implementation">Testing the implementation</h2>
<p>This <code class="language-plaintext highlighter-rouge">Vector</code> implementation has been extensively tested using the <a href="https://cmocka.org/">cmocka</a> testing framework. The tests are provided in the file <a href="https://github.com/alexandra-zaharia/libgcds/blob/master/tests/vector-test.c">vector-test.c</a>.</p>
<p>Install cmocka first. Then, to build the tests, run:</p>
<div class="language-bash highlighter-rouge">
<div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>gcc <span class="nt">-Wall</span> vector-test.c vector.c <span class="nt">-g</span> <span class="nt">-o</span> vector-test <span class="nt">-lcmocka</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<p>To execute the tests, run:</p>
<div class="language-bash highlighter-rouge">
<div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>./test-vector
</pre></td>
</tr></tbody></table></code></div>
</div>
<p>To execute the tests using <a href="https://www.valgrind.org/">valgrind</a> in order to detect memory leaks, run:</p>
<div class="language-bash highlighter-rouge">
<div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>valgrind <span class="nt">--leak-check</span><span class="o">=</span>full ./test-vector
</pre></td>
</tr></tbody></table></code></div>
</div>
<p>There should be no memory leaks :-)</p>
<h2 id="availability">Availability</h2>
<p>The full <code class="language-plaintext highlighter-rouge">Vector</code> implementation along with the tests is available on <a href="https://github.com/alexandra-zaharia/libgcds">GitHub</a>.</p>
</div>
<div class="post-tail-wrapper text-muted">
<div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href="/categories/c-c/">C/C++</a>, <a href="/categories/data-structures/">data structures</a>
</div>
<div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/c-c/" class="post-tag no-text-decoration">c/c++</a> <a href="/tags/vector/" class="post-tag no-text-decoration">vector</a>
</div>
<div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
<div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div>
<div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Implementing%20a%20vector%20in%20C%20-%20Alexandra%20Zaharia&amp;url=https://alexandra-zaharia.github.io/posts/implementing-a-vector-in-c/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Implementing%20a%20vector%20in%20C%20-%20Alexandra%20Zaharia&amp;u=https://alexandra-zaharia.github.io/posts/implementing-a-vector-in-c/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Implementing%20a%20vector%20in%20C%20-%20Alexandra%20Zaharia&amp;url=https://alexandra-zaharia.github.io/posts/implementing-a-vector-in-c/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://news.ycombinator.com/submitlink?t=Implementing%20a%20vector%20in%20C%20-%20Alexandra%20Zaharia&amp;u=https://alexandra-zaharia.github.io/posts/implementing-a-vector-in-c/" data-toggle="tooltip" data-placement="top" title="HackerNews" target="_blank" rel="noopener" aria-label="HackerNews"> <i class="fa-fw fab fa-hacker-news"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://alexandra-zaharia.github.io/posts/implementing-a-vector-in-c/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span>
</div>
</div>
</div>
</div></div>
<div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down">
<div class="access">
<div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2">
<li><a href="/posts/connect-bluetooth-headset-automatically-linux/">Connect a bluetooth headset automatically in Linux</a></li>
<li><a href="/posts/concurrency-crash-course-part-1/">Concurrency crash course. Part 1: Terminology, usage and pitfalls</a></li>
<li><a href="/posts/my-2021-dev-retrospective/">My 2021 dev retrospective</a></li>
<li><a href="/posts/how-to-stop-a-python-thread-cleanly/">How to stop a Python thread cleanly</a></li>
<li><a href="/posts/how-to-return-a-result-from-a-python-thread/">How to return a result from a Python thread</a></li>
</ul>
</div>
<div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c-c/">c/c++</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/binary/">binary</a> <a class="post-tag" href="/tags/bluetooth/">bluetooth</a> <a class="post-tag" href="/tags/manjaro/">manjaro</a> <a class="post-tag" href="/tags/mercurial/">mercurial</a> <a class="post-tag" href="/tags/thread/">thread</a> <a class="post-tag" href="/tags/version-control/">version control</a>
</div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav>
</div>
</div>
</div>
<div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">
<div id="related-posts" class="mt-5 mb-2 mb-sm-4">
<h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3>
<div class="card-deck mb-4">
<div class="card"> <a href="/posts/bitwise-nuggets-xor-swap/"><div class="card-body"> <span class="timeago small">Nov 2, 2021<i class="unloaded">2021-11-02T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Bitwise nuggets: XOR swap</h3>
<div class="text-muted small"><p> XOR swap is a kind of in-place swap that only uses XOR operations. No temporary variable nor addition/subtraction operation is needed. However, it only works for integers. Reminder: XOR (short for...</p></div>
</div></a>
</div>
<div class="card"> <a href="/posts/anonymous-unions-in-c/"><div class="card-body"> <span class="timeago small">Dec 17, 2017<i class="unloaded">2017-12-17T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>(Anonymous) unions in C</h3>
<div class="text-muted small"><p> The first time I had to explain to students why a C union may sometimes come in handy, I came up with this example. As my students had only been exposed to C for about 15 hours, I needed to refrain...</p></div>
</div></a>
</div>
<div class="card"> <a href="/posts/how-to-read-safely-from-stdin-in-c/"><div class="card-body"> <span class="timeago small">Dec 11, 2018<i class="unloaded">2018-12-11T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to read safely from stdin in C</h3>
<div class="text-muted small"><p> Ah, C and strings. <img class="emoji" title=":confounded:" alt=":confounded:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f616.png" height="20" width="20"> When reading from stdin, we can use fgets(str, n, stdin) to read at most n - 1 characters into a char array pointed to by str. We can also create a utility function...</p></div>
</div></a>
</div>
</div>
</div>
<div class="post-navigation d-flex justify-content-between"> <a href="/posts/anonymous-unions-in-c/" class="btn btn-outline-primary" prompt="Older"><p>(Anonymous) unions in C</p></a> <a href="/posts/how-to-read-safely-from-stdin-in-c/" class="btn btn-outline-primary" prompt="Newer"><p>How to read safely from stdin in C</p></a>
</div>
<div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div>
<script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://alexandra-zaharia.github.io/posts/implementing-a-vector-in-c/'; this.page.identifier = '/posts/implementing-a-vector-in-c/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://azc.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (modeToggle !== null) { modeToggle.addEventListener('click', reloadDisqus); window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script>
</div></div></div>
<footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center">
<div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/alexandra-zaharia">Alexandra Zaharia</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div>
<div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div>
</div></footer>
</div>
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content">
<div id="search-hints">
<h4 class="text-muted mb-4">Trending Tags</h4>
<a class="post-tag" href="/tags/c-c/">c/c++</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/algorithms/">algorithms</a> <a class="post-tag" href="/tags/binary/">binary</a> <a class="post-tag" href="/tags/bluetooth/">bluetooth</a> <a class="post-tag" href="/tags/manjaro/">manjaro</a> <a class="post-tag" href="/tags/mercurial/">mercurial</a> <a class="post-tag" href="/tags/thread/">thread</a> <a class="post-tag" href="/tags/version-control/">version control</a>
</div>
<div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
</div></div>
</div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-Z7ZY7JRFQJ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-Z7ZY7JRFQJ'); }); </script>
